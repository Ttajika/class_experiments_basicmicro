
# Streamlit市場実験アプリ 使い方説明書

このアプリは、限界効用（MU）を入力して売買の意思を表明し、仮想市場で取引を行う経済実験用のWebアプリです。学生と管理者（教員）がそれぞれの画面から参加・制御できます。

---

## プレイヤー（学生）の使い方

1. 発行されたURLにアクセスします（例：`https://your-app.onrender.com/?class=A`）。
2. 学籍番号などの識別情報を入力してログインします。
3. 取引の種類を「購入」または「売却」から選びます。
4. スライダーで、1単位ごとの限界効用（または損失）を入力します。
5. 入力後、「提出する」ボタンを押します。
6. 提出しなかった場合は、自動的に「不参加（choice = 0）」として締め切られます。
7. 結果は管理者が「報酬を確定する」まで表示されません。

---

## 管理者（教員）の使い方

1. URL末尾に `?class=A&mode=admin` を付けてアクセスします。
2. サイドバーでパスワードを入力し、管理者モードにログインします。
3. 提出状況とプレイヤー情報を一覧で確認できます。

### 市場精算
- 「価格を集計して表示」ボタンを押すと、
  - プレイヤーの限界効用に基づき、最も取引量の多くなる価格が計算されます。
  - 評価の高い買い手と評価の低い売り手が順にマッチングされ、取引が成立します。

### 報酬の確定と開示
- 「報酬を確定する」ボタンを押すと、
  - プレイヤーに報酬が確定し、個別に結果が開示されます。
  - これ以降、プレイヤー画面に取引結果と報酬額が表示されます。

### ラウンドの進行
- 「次のラウンドへ」ボタンを押すと、
  - プレイヤーの提出状態がリセットされ、次の取引が可能になります。
  - 価値や保有数などは更新されたまま継続されます。

### 実験のリセット
- 「実験リセット」ボタンで、全プレイヤーの情報とグループ状態を初期化できます。

---

## URLの使い分け（クラス別・管理者）

- `...?class=A`：クラスAの学生用URL
- `...?class=A&mode=admin`：クラスAの管理者用URL

URLをあらかじめ配布しておけば、学生はログインのみで参加できます。

---
